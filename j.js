var ns_marketgroupsubscriptionlib,ns_marketgroupsubscriptionlib_ui,SITE_ROOT_PATH="sportsoh";
!function(t){var e=ns_gen5_util.Delegate,o=function(){function t(t){this.marketGroup=t,this.startTween()}return t.prototype.initialize=function(t){this.marketGroupButton=t,!this.requestActive&&0==this.marketGroup.stem.getChildren().length&&this.marketGroup.stem.data.PD&&(this.requestActive=!0,Locator.subscriptionManager.subscribe(this.marketGroup.stem.data.PD,new e(this,this.childTreeSnapshotHandler)),this.marketGroupButton.addSpinner())},t.prototype.childTreeSnapshotHandler=function(t){var e,o,i,n,r;if(this.requestActive=!1,this.marketGroupButton.removeSpinner(),this.marketGroup.stem&&(e=t?t.type:this.marketGroup.stem.data.PD,o=Locator.treeLookup.getReference(e),i=o&&o.getChildren()[0])){for(;"MG"!=i.nodeName&&(n=i.getChildren(),n.length>0);)i=n[0];"MG"==i.nodeName&&i.getChildren()&&(this.marketGroup.stem.data.OM&&(i.data.OM="2"),r=this.marketGroup.stem.parent.getChildren().indexOf(this.marketGroup.stem),i.data.DO="2",i.data.OR=r.toString(),i.parent.removeChildStem(i),this.marketGroup.stem.parent.insert(i),this.marketGroup.stem.remove(),o.remove()),Locator.subscriptionManager.unsubscribe(e)}},t.prototype.startTween=function(){var t=this,e="DO",o="2"==this.marketGroup.stem.data[e];o&&(this.marketGroup.stem.data[e]="0",this.marketGroup.noinvalidate_setOpen(!1),Locator.validationManager.callLater(function(){t.marketGroup.setOpen(!0)}))},t.SInit=function(){t.prototype.requestActive=!1,t.prototype.marketGroup=null,t.prototype.marketGroupButton=null}(),t}();t.ChildrenSubscriber=o}(ns_marketgroupsubscriptionlib||(ns_marketgroupsubscriptionlib={})),function(t){var e=ns_gen5_ui.ComponentStemBase,o=ns_gen5_ui.Label,i=ns_gen5_util.Singleton,n=ns_gen5_language.Resource,r=ns_accessibilityuilib_ui.ButtonAccessibilityDelegate,s=function(t){function e(e){var o=t.call(this)||this;return o.delegate=e,o}__extends(e,t),s=e,e.prototype.createChildren=function(){this.language=i.getInstance(n,this),this.language&&(this.addStyle(this.defaultStyle),t.prototype.createChildren.call(this),this.textNode=new o,this.setAsClosed(),this.textNode.addStyle(this.defaultStyle+"_Link"),this.appendChild(this.textNode))},e.prototype.clickHandler=function(){this.delegate.showMoreClicked()},e.prototype.getPercentWidth=function(){return 100},e.prototype.getStoredPercentWidth=function(){return 100},e.prototype.addSpinner=function(){this.addStyle(this.defaultStyle+"_Spinner")},e.prototype.removeSpinner=function(){this.removeStyle(this.defaultStyle+"_Spinner")},e.prototype.setAsOpen=function(){this.textNode.setText(this.language.getValue("ShowLess")),this.addStyle(this.defaultStyle+"_Open")},e.prototype.setAsClosed=function(){this.textNode.setText(this.language.getValue("ShowMore")),this.removeStyle(this.defaultStyle+"_Open")};var s;return e.SInit=function(){s.prototype.defaultStyle="msl-ShowMore",s.prototype.lastInRow=!1,s.prototype.textNode=null,s.prototype.language=null}(),e=s=__decorate([AccessibilityDelegate(r)],e)}(e);t.ShowMore=s}(ns_marketgroupsubscriptionlib_ui||(ns_marketgroupsubscriptionlib_ui={})),function(t){var e=ns_gen5_util.Delegate,o=ns_gen5_util.MathUtil,i=ns_marketgroupsubscriptionlib_ui.ShowMore,n=ns_gen5_animation.Tween,r=t.ChildrenSubscriber,s=function(){function t(t,e){this.maxRowHeightLookup={},this.minRowHeightLookup={},this.suspendedElementsByMarket={},this.marketGroup=t,this.buttonClass=e||i,this.childrenSubscriber=new r(t)}return t.prototype.initialize=function(t,e){var i=this;this.marketGroupContainer=t,this.childrenSubscriber.initialize(e),!this.requestActive&&this.marketGroup.stem.data.OM&&this.marketGroupContainer.stem.getChildren().length>0&&(this.showMoreButton=new this.buttonClass(this),this.marketGroupContainer.appendChild(this.showMoreButton),this.marketGroup.stem.data.ON&&(this.showMoreParticipantLimit=o.StringToNumber(this.marketGroup.stem.data.ON)),"2"==this.marketGroup.stem.data.OM&&Locator.validationManager.callPostValidation(function(){i.setInitialCouponHeightsAndHideChildren()}))},t.prototype.childTreeSnapshotHandler=function(t){var e,o,i,n,r;if(this.spinnerTimeout&&clearTimeout(this.spinnerTimeout),this.requestActive=!1,this.showMoreButton.removeSpinner(),e=t?t.type:this.marketGroup.stem.data.PD,o=Locator.treeLookup.getReference(e),i=o&&o.getChildren()[0]){for(;"MG"!=i.nodeName&&(n=i.getChildren(),n.length>0);)i=n[0];"MG"==i.nodeName&&i.getChildren()&&(r=this.marketGroup.stem.parent.getChildren().indexOf(this.marketGroup.stem),i.data.OR=r.toString(),this.marketGroup.stem.data.OM&&(i.data.OM="2"),this.marketGroup.getOpen()&&this.showMoreButton&&(i.data.DO="1"),i.parent.removeChildStem(i),this.marketGroup.stem.parent.insert(i),this.marketGroup.stem.remove(),o.remove()),Locator.subscriptionManager.unsubscribe(e)}},t.prototype.showMoreClicked=function(){var t,o=this;this.requestActive||(this.marketGroup.stem.data.PD?(this.requestActive=!0,Locator.subscriptionManager.subscribe(this.marketGroup.stem.data.PD,new e(this,this.childTreeSnapshotHandler)),this.spinnerTimeout=window.setTimeout(function(){o.showMoreButton.addSpinner()},300)):this.isShowMoreOpen?(t=this.marketGroup.getElement(),t.getBoundingClientRect().top<0&&t.scrollIntoView(),this.iterateMarkets(function(t,e,i){var n=o.minRowHeightLookup[e],r=o.maxRowHeightLookup[e],s=t.getElement();o.marketGroupContainer.setOthersOnRequestVisible(!1),o.animateCouponResize(s,r,n,function(){o.hideParticipants(t,i,e)})}),this.showMoreButton.setAsClosed(),this.isShowMoreOpen=!1):(this.marketGroupContainer.setOthersOnRequestVisible(!0),this.iterateMarkets(function(t,e,i){var n=o.maxRowHeightLookup[e],r=o.minRowHeightLookup[e],s=t.getElement();o.showParticipants(t,i),o.animateCouponResize(s,r,n)}),this.showMoreButton.setAsOpen(),this.isShowMoreOpen=!0))},t.prototype.setInitialCouponHeightsAndHideChildren=function(){var t=this;this.iterateMarkets(function(e,o,i){var n=e.getElement();e.stem.data.CX&&"0"!=e.stem.data.CX&&(t.couponMightChangeHeights=!0),t.maxRowHeightLookup[o]||(t.maxRowHeightLookup[o]=n.offsetHeight),t.hideParticipants(e,i,o),e.lastInRow&&!t.minRowHeightLookup[o]&&(t.minRowHeightLookup[o]=n.offsetHeight)}),"1"==this.marketGroup.stem.data.DO&&(this.showMoreButton.setAsOpen(),this.isShowMoreOpen=!0,this.iterateMarkets(function(e,o,i){var n=t.maxRowHeightLookup[o],r=t.minRowHeightLookup[o],s=e.getElement();t.showParticipants(e,i),t.animateCouponResize(s,r,n,function(){t.marketGroupContainer.setOthersOnRequestVisible(t.isShowMoreOpen)})}))},t.prototype.iterateMarkets=function(t){var e,o,i=this.marketGroupContainer.getElementChildren(),n=0;for(e=0;e<i.length;e++)o=i[e].wrapper,o&&o.stem&&"1"===o.stem.data.OM&&(t(o,n,e),o.lastInRow&&n++)},t.prototype.showParticipants=function(t,e){var o,i,n,r=this.suspendedElementsByMarket[e];if(r&&0!=r.length){for(o=0,i=r;o<i.length;o++)n=i[o],n.unsuspendElementFromDom();this.suspendedElementsByMarket[e]=[]}},t.prototype.hideParticipants=function(t,e,o){var i,n,r,s=t.getElementChildren();for(this.suspendedElementsByMarket[e]||(this.suspendedElementsByMarket[e]=[]),i=0==o?this.showMoreParticipantLimit+t.baseIndex:0,n=s.length-1;n>=i;n--)r=s[n].wrapper,r&&(r.suspendElementFromDom(),this.suspendedElementsByMarket[e].push(r))},t.prototype.invalidateSize=function(){var t=this;this.couponMightChangeHeights&&Locator.validationManager.callNewContext(function(){t.iterateMarkets(function(e,o,i){t.maxRowHeightLookup={},t.minRowHeightLookup={},t.isShowMoreOpen||t.showParticipants(e,i);var n=e.getElement();t.maxRowHeightLookup[o]||(t.maxRowHeightLookup[o]=n.offsetHeight),t.hideParticipants(e,i,o),e.lastInRow&&!t.minRowHeightLookup[o]&&(t.minRowHeightLookup[o]=n.offsetHeight),t.isShowMoreOpen&&t.showParticipants(e,i)})})},t.prototype.animateCouponResize=function(t,e,o,i){new n(t.wrapper,450,{style:{height:{from:e,to:[o,"px"]}},ease:ns_gen5_animation_easing.Quartic.EaseInOut}).onBegin(function(){t.style.overflow="hidden"}).onComplete(function(){t.style.height="",t.style.overflow="",i&&i()})},t.SInit=function(){t.prototype.couponMightChangeHeights=!1,t.prototype.isShowMoreOpen=!1,t.prototype.maxRowHeightLookup=null,t.prototype.minRowHeightLookup=null,t.prototype.requestActive=!1,t.prototype.showMoreButton=null,t.prototype.showMoreParticipantLimit=6,t.prototype.spinnerTimeout=null,t.prototype.suspendedElementsByMarket=null,t.prototype.marketGroup=null,t.prototype.marketGroupContainer=null,t.prototype.childrenSubscriber=null,t.prototype.buttonClass=null}(),t}();t.ShowMoreSubscriber=s}(ns_marketgroupsubscriptionlib||(ns_marketgroupsubscriptionlib={}));